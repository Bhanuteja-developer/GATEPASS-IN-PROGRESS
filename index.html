<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>HMWSSB - EDP SECTION - GATEPASS</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<!-- ✅ Font Awesome for Sign-out Icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
  --accent:#0b63a8;
  --accent-dark:#084f85;
  --muted:#6b7280;
  --bg:#f3f6f9;
  --card:#ffffff;
  --border:#0b63a8;
  --radius:12px;
}

*{box-sizing:border-box;}
body{margin:0;font-family:"Inter",sans-serif;background:linear-gradient(180deg,#f7fbff 0%,var(--bg) 100%);color:#0b1b2b;}

header{
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(90deg,var(--accent),var(--accent-dark));
  padding:16px 24px;
  color:#fff;
  position:sticky;
  top:0;
  z-index:100;
  box-shadow:0 6px 18px rgba(11,99,168,0.15);
  gap:20px;
}
header .title{font-size:22px;font-weight:700;text-align:center;flex:1;}
header .signout-btn{
  display:flex;
  align-items:center;
  gap:8px;
  background:#fff;color:var(--accent);border:none;border-radius:6px;
  padding:8px 16px;font-weight:700;cursor:pointer;
  transition:all .3s ease;
}
header .signout-btn i{font-size:16px;}
header .signout-btn:hover{
  background:linear-gradient(90deg,var(--accent-dark),var(--accent));
  color:#fff;box-shadow:0 0 12px rgba(11,99,168,0.6);transform:translateY(-2px);
}

.wrap{max-width:1180px;margin:28px auto;padding:0 18px 80px;}

.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  padding:20px;
  margin-bottom:20px;
  transition:transform .15s ease, box-shadow .3s ease;
}
.card:hover{
  transform:translateY(-3px);
  box-shadow:0 12px 24px rgba(0,0,0,0.15);
}

legend{
  font-weight:700;
  font-size:16px;
  padding:6px 12px;
  color:#fff;
  border-radius:6px;
  background:linear-gradient(90deg,var(--accent),var(--accent-dark));
  margin-bottom:12px;
  display:inline-block;
}

.form-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:12px;
}
label{display:block;font-size:12px;color:var(--muted);font-weight:700;margin-bottom:6px;}

input[type="text"], input[type="date"], select, textarea, input[type="file"]{
  width:100%;
  padding:10px 14px;
  border-radius:8px;
  border:1px solid var(--border);
  font-size:14px;
  background:#fff;
  color:#0b1b2b;
  box-shadow:0 2px 6px rgba(11,99,168,0.15);
  transition: all 0.4s ease;
}

input:focus, select:focus, textarea:focus{
  outline:none;
  border:1px solid transparent;
  background-clip: padding-box;
  position: relative;
  box-shadow: 0 0 12px rgba(11,99,168,0.4);
  border-radius:8px;
}

textarea{min-height:84px;resize:vertical;}
.span-2{grid-column:1 / -1;}
.card-footer{display:flex;justify-content:flex-end;margin-top:12px;gap:10px;}
.btn{padding:9px 14px;border-radius:8px;border:none;font-weight:700;cursor:pointer;}
.btn-primary{background:var(--accent);color:#fff;box-shadow:0 8px 26px rgba(11,99,168,0.08);}
.btn-primary:hover{background:var(--accent-dark);transform:translateY(-2px);}
.sigs{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;}
.sig{flex:1;min-width:200px;border:1.5px dashed var(--border);border-radius:8px;padding:12px;background:linear-gradient(180deg,#fbfdff,#ffffff);text-align:center;font-weight:700;color:#223;min-height:74px;}
.sig small{display:block;font-size:12px;font-weight:600;color:var(--muted);margin-top:8px;}
.hidden{display:none !important;}
@media print{
  header,.btn{display:none !important;}
  body{background:#fff;}
  .card{box-shadow:none;border:none;}
}
</style>
</head>
<body>

<header>
  <div class="title">HMWSSB - EDP SECTION - GATEPASS</div>
  <button class="signout-btn" onclick="window.location.href='login.html'">
    <i class="fas fa-sign-out-alt"></i> Sign Out
  </button>
</header>

<main class="wrap">

  <!-- TOKEN DETAILS -->
  <fieldset class="card" id="tokenSection">
    <legend>TOKEN DETAILS</legend>
    <div class="form-grid">

      <!-- Reordered fields as requested -->
      <div><label>ASSET ID</label><input id="assetId" type="text"></div>
      <div><label>TOKEN NO</label><input id="tokenNo" type="text"></div>
      <div><label>TOKEN DATE</label><input id="tokenDate" type="date"></div>
      <div><label>USER NAME</label><input id="userName" type="text"></div>
      <div><label>USER-DESIGNATION</label><input id="userDesignation" type="text"></div>
      <div><label>PHONE NO</label><input id="phoneNo" type="text"></div>
      <div><label>DIVISION</label><input id="division" type="text"></div>
      <div><label>LOCATION</label><input id="location" type="text"></div>

    </div>
    <div class="card-footer">
      <button class="btn btn-primary" type="button" onclick="resetSection('tokenSection')">Reset</button>
    </div>
  </fieldset>

  <!-- DEFECTIVE DETAILS -->
  <fieldset class="card" id="defectiveSection">
    <legend>DEFECTIVE DETAILS</legend>
    <div class="form-grid">
      <div>
        <label>ASSET</label>
        <select id="defAsset" onchange="handleAssetChange('def')">
          <option value="">--select--</option>
          <option>KEYBOARD</option>
          <option>MOUSE</option>
          <option>MONITOR</option>
          <option>UPS</option>
          <option>PRINTER</option>
          <option>SCANNER</option>
          <option>CABLE</option>
          <option>CPU SUB-ITEM</option>
          <option>DONGLE</option>
          <option>LAN CABLE</option>
          <option>CPU</option>
        </select>
      </div>

      <!-- CPU SUB-ITEM (now includes PROCESSOR FAN) -->
      <div id="defSubAssetContainer" class="hidden">
        <label>CPU SUB-ITEM</label>
        <select id="defSubAsset" onchange="handleCpuSubChange('def')">
          <option value="">--select--</option>
          <option>MOTHERBOARD</option>
          <option>SMPS</option>
          <option>RAM</option>
          <option>CMOS BATTERY</option>
          <option>LAN-ADAPTER</option>
          <option>HDD</option>
          <option>SSD</option>
          <option>PROCESSOR FAN</option>
          <option>OS INSTALLED</option>
          <option>OTHER</option>
        </select>
      </div>

      <div id="defExtraFields" class="span-2 hidden"></div>

      <div><label>ASSET ID</label><input id="defAssetId" type="text"></div>

      <!-- MAKE: changed to select with the brand list you provided -->
      <div>
        <label>MAKE</label>
        <select id="defMake">
          <option value="">--select--</option>
          <option>ACER</option><option>AOC</option><option>ASUS</option><option>BENQ</option>
          <option>DELL</option><option>ENTER</option><option>FRONTECH</option><option>GIGABYTE</option>
          <option>HP</option><option>LENOVO</option><option>LG</option><option>MSI</option>
          <option>SAMSUNG</option><option>VIEWSONIC</option><option>VOLTRIQ</option><option>ZEBION</option><option>ZEBRONICS</option>
        </select>
      </div>

      <!-- MODEL: now a dropdown (DDR options) per your request for RAM -->
      <div>
        <label>MODEL</label>
        <select id="defModel">
          <option value="">--select--</option>
          <option>DDR-2</option><option>DDR-3</option><option>DDR-4</option><option>DDR-5</option>
        </select>
      </div>

      <div><label>S.NO</label><input id="defSno" type="text"></div>

      <!-- DEF-REMARK placed before DEF-SUBMITTED (moved as requested) -->
      <div class="span-2"><label>DEF-REMARK</label><textarea id="defRemark"></textarea></div>

      <!-- DEF-SUBMITTED moved below DEF-REMARK -->
      <div>
        <label>DEF-SUBMITTED</label>
        <select id="defSubmitted" onchange="handleDefSubmitted()">
          <option value="">--select--</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div id="defReasonContainer" class="span-2 hidden">
        <label>REASON (if not submitted)</label>
        <textarea id="defReason"></textarea>
      </div>

      <div class="span-2"><label>Attach Image</label><input id="defImage" type="file" accept="image/*"></div>
    </div>
    <div class="card-footer">
      <button class="btn btn-primary" type="button" onclick="resetSection('defectiveSection')">Reset</button>
    </div>
  </fieldset>

  <!-- REPLACEMENT DETAILS -->
  <fieldset class="card" id="replacementSection">
    <legend>REPLACEMENT DETAILS</legend>
    <div class="form-grid">
      <div>
        <label>ASSET</label>
        <select id="repAsset" onchange="handleAssetChange('rep')">
          <option value="">--select--</option>
          <option>KEYBOARD</option>
          <option>MOUSE</option>
          <option>MONITOR</option>
          <option>UPS</option>
          <option>PRINTER</option>
          <option>SCANNER</option>
          <option>CABLE</option>
          <option>CPU SUB-ITEM</option>
          <option>DONGLE</option>
          <option>LAN CABLE</option>
          <option>CPU</option>
        </select>
      </div>

      <div id="repSubAssetContainer" class="hidden">
        <label>CPU SUB-ITEM</label>
        <select id="repSubAsset" onchange="handleCpuSubChange('rep')">
          <option value="">--select--</option>
          <option>MOTHERBOARD</option>
          <option>SMPS</option>
          <option>RAM</option>
          <option>CMOS BATTERY</option>
          <option>LAN-ADAPTER</option>
          <option>HDD</option>
          <option>SSD</option>
          <option>PROCESSOR FAN</option>
          <option>OS INSTALLED</option>
          <option>OTHER</option>
        </select>
      </div>

      <div id="repExtraFields" class="span-2 hidden"></div>

      <div><label>ASSET ID</label><input id="repAssetId" type="text"></div>

      <!-- MAKE for replacement: select with same brands -->
      <div>
        <label>MAKE</label>
        <select id="repMake">
          <option value="">--select--</option>
          <option>ACER</option><option>AOC</option><option>ASUS</option><option>BENQ</option>
          <option>DELL</option><option>ENTER</option><option>FRONTECH</option><option>GIGABYTE</option>
          <option>HP</option><option>LENOVO</option><option>LG</option><option>MSI</option>
          <option>SAMSUNG</option><option>VIEWSONIC</option><option>VOLTRIQ</option><option>ZEBION</option><option>ZEBRONICS</option>
        </select>
      </div>

      <!-- MODEL for replacement: DDR options -->
      <div>
        <label>MODEL</label>
        <select id="repModel">
          <option value="">--select--</option>
          <option>DDR-2</option><option>DDR-3</option><option>DDR-4</option><option>DDR-5</option>
        </select>
      </div>

      <div><label>S.NO</label><input id="repSno" type="text"></div>

      <div>
        <label>REPLACED</label>
        <select id="repType">
          <option value="">--select--</option>
          <option>NEW</option>
          <option>STANDBY</option>
        </select>
      </div>

      <div class="span-2"><label>REP-REMARK</label><textarea id="repRemark"></textarea></div>
      <div class="span-2"><label>Attach Image</label><input id="repImage" type="file" accept="image/*"></div>
    </div>
    <div class="card-footer">
      <button class="btn btn-primary" type="button" onclick="resetSection('replacementSection')">Reset</button>
    </div>
  </fieldset>

  <!-- REMARKS & SIGNATURES -->
  <fieldset class="card">
    <legend>REMARKS & SIGNATURES</legend>
    <label>REMARKS</label>
    <textarea id="remarks"></textarea>
    <div class="sigs">
      <div class="sig">Manager Approval <small>Name & Signature</small></div>
      <div class="sig">Field Engineer <small>Name & Signature</small></div>
      <div class="sig">User Acknowledgement <small>Name & Signature</small></div>
    </div>
  </fieldset>

</main>

<script>
const $ = id => document.getElementById(id);

// ✅ resetSection (keeps same behavior)
function resetSection(sectionId) {
  const sec = document.getElementById(sectionId);
  if (!sec) return;

  sec.querySelectorAll("input, select, textarea").forEach(el => {
    if (el.type === "file") el.value = null;
    else el.value = "";
  });

  // Hide dynamic areas
  sec.querySelectorAll('[id$="ExtraFields"], [id$="SubAssetContainer"], [id$="ReasonContainer"] , [id$="RamCapacityOther"]').forEach(e => {
    if (e) {
      e.innerHTML = '';
      e.classList.add('hidden');
    }
  });

  // Also hide any extra ram-other inputs if present globally
  ['defRamCapacityOther','repRamCapacityOther'].forEach(id => {
    const el = document.getElementById(id);
    if(el) el.value = '';
  });
}

/* Helper to show/hide elements */
function show(el){ if(el) el.classList.remove('hidden'); }
function hide(el){ if(el) el.classList.add('hidden'); }

/* When monitor is selected, we want the MAKE dropdown visible — MAKE is always a select now,
   but we need to show CPU SUB-ITEM when CPU SUB-ITEM chosen. */

function handleAssetChange(prefix){
  const asset = $(`${prefix}Asset`)?.value || '';
  const sub = $(`${prefix}SubAssetContainer`);
  const extra = $(`${prefix}ExtraFields`);
  if(extra){ extra.innerHTML=''; extra.classList.add('hidden'); }
  if(sub){ sub.classList.add('hidden'); }

  // Show CPU SUB-ITEM container only when asset === 'CPU SUB-ITEM'
  if(asset === 'CPU SUB-ITEM' && sub) sub.classList.remove('hidden');

  // For 'CABLE' and 'MONITOR' existing behavior used ExtraFields — keep that
  if(asset === 'CABLE' && extra){
    extra.classList.remove('hidden');
    extra.innerHTML = `<label>CABLE-DETAILS</label><textarea id="${prefix}CableDetails"></textarea>`;
  }

  if(asset === 'MONITOR' && extra){
    // Keep your monitor-specific extra (INCHES) as original
    extra.classList.remove('hidden');
    extra.innerHTML = `
      <label>INCHES</label>
      <select id="${prefix}MonitorInches" onchange="handleInchChange('${prefix}')">
        <option value="">--select--</option>
        <option>15 inch</option>
        <option>17 inch</option>
        <option>19 inch</option>
        <option>21 inch</option>
        <option>22 inch</option>
        <option>24 inch</option>
        <option>27 inch</option>
        <option value="OTHER">OTHER</option>
      </select>
      <div id="${prefix}OtherInchContainer" class="hidden" style="margin-top:10px;">
        <label>Enter Inches</label>
        <input type="text" id="${prefix}OtherInch" placeholder="Specify monitor size">
      </div>
    `;
  }
}

function handleInchChange(prefix){
  const inchVal = $(`${prefix}MonitorInches`).value;
  const otherBox = $(`${prefix}OtherInchContainer`);
  if(inchVal === 'OTHER'){
    otherBox.classList.remove('hidden');
  } else {
    otherBox.classList.add('hidden');
    const ob = $(`${prefix}OtherInch`);
    if(ob) ob.value = '';
  }
}

/* CPU SUB-ITEM change handler
   - when RAM: show capacity dropdown (no "NO OF STICKS")
   - when HDD/SSD: show storage capacity input
   - when LAN-ADAPTER: show adapter type input
   - PROCESSOR FAN is just an option in this list (no extra fields)
*/
function handleCpuSubChange(prefix){
  const val = $(`${prefix}SubAsset`)?.value || '';
  const extra = $(`${prefix}ExtraFields`);
  if(!extra) return;
  extra.innerHTML = '';
  extra.classList.add('hidden');

  if(val === 'RAM'){
    extra.classList.remove('hidden');

    // capacity select with OTHER option
    extra.innerHTML = `
      <label>CAPACITY</label>
      <select id="${prefix}RamCapacity" onchange="handleRamCapacityChange('${prefix}')">
        <option value="">--select--</option>
        <option>2 GB</option>
        <option>4 GB</option>
        <option>8 GB</option>
        <option>16 GB</option>
        <option>2 GB + 2 GB</option>
        <option>4 GB + 4 GB</option>
        <option>8 GB + 8 GB</option>
        <option>16 GB + 16 GB</option>
        <option value="OTHER">OTHER</option>
      </select>
      <div id="${prefix}RamCapacityOther" class="hidden" style="margin-top:10px;">
        <label>Enter Capacity</label>
        <input type="text" id="${prefix}RamCapacityOtherInput" placeholder="Specify capacity">
      </div>
    `;

    // Also ensure MODEL dropdown is present — we changed defModel/repModel to selects already
    // (no extra action needed here).
  }
  else if(val === 'HDD' || val === 'SSD'){
    extra.classList.remove('hidden');
    extra.innerHTML = `<label>STORAGE CAPACITY</label><input type="text" id="${prefix}StorageCap">`;
  }
  else if(val === 'LAN-ADAPTER'){
    extra.classList.remove('hidden');
    extra.innerHTML = `<label>ADAPTER TYPE</label><input type="text" id="${prefix}LanType">`;
  }
  else {
    // other sub-items — no extra fields (PROCESSOR FAN, SMPS, etc.)
    extra.innerHTML = '';
    extra.classList.add('hidden');
  }
}

/* When user selects RAM capacity 'OTHER', show the other input; otherwise hide it */
function handleRamCapacityChange(prefix){
  const val = $(`${prefix}RamCapacity`).value;
  const otherBox = $(`${prefix}RamCapacityOther`);
  if(val === 'OTHER'){
    otherBox.classList.remove('hidden');
  } else {
    otherBox.classList.add('hidden');
    const input = $(`${prefix}RamCapacityOtherInput`);
    if(input) input.value = '';
  }
}

function handleDefSubmitted(){
  const val = $('defSubmitted').value;
  const reason = $('defReasonContainer');
  if(val === 'No'){
    reason.classList.remove('hidden');
  } else {
    reason.classList.add('hidden');
    const rr = $('defReason');
    if(rr) rr.value = '';
  }
}
</script>

</body>
</html>
